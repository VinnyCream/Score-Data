<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Score Data - H·ªá Th·ªëng T√≠nh ƒêi·ªÉm ƒê·∫°i H·ªçc Chuy√™n Nghi·ªáp</title>
    <meta name="description" content="C√¥ng c·ª• t√≠nh ƒëi·ªÉm GPA, qu·∫£n l√Ω ƒëi·ªÉm s·ªë sinh vi√™n ƒë·∫°i h·ªçc t·ªët nh·∫•t.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
    
    <link rel="stylesheet" href="style.css">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body data-theme="light">

    <div class="bg-animation">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
        <div class="grid-overlay"></div>
    </div>

    <div id="toast-container"></div>

    <div id="auth-screen" class="main-container center-content">
        <div class="glass-card auth-card fade-in-up">
            <div class="auth-header">
                <div class="logo-area">
                    <div class="logo-icon-lg">
                        <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
                    </div>
                    <h1 class="app-name">Score Data</h1>
                    <p class="app-slogan" data-i18n="welcomeSub">H·ªá th·ªëng qu·∫£n l√Ω ƒëi·ªÉm s·ªë sinh vi√™n</p>
                </div>
            </div>
            
            <div id="login-form" class="auth-form">
                <h2 data-i18n="loginHeader">ƒêƒÉng nh·∫≠p</h2>
                
                <div class="input-wrapper">
                    <input type="text" id="login-username" placeholder=" " autocomplete="username">
                    <label data-i18n="usernameLabel">T√™n ƒëƒÉng nh·∫≠p</label>
                    <span class="input-icon">üë§</span>
                </div>

                <div class="input-wrapper">
                    <input type="password" id="login-password" placeholder=" " autocomplete="current-password">
                    <label data-i18n="passwordLabel">M·∫≠t kh·∫©u</label>
                    <span class="toggle-password" onclick="App.togglePassword('login-password')">
                        <svg class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                    </span>
                </div>

                <button class="btn btn-primary full-width hover-scale shimmer-effect" id="btn-login">
                    <span data-i18n="loginBtn">ƒêƒÉng nh·∫≠p</span>
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
                </button>

                <div class="divider"><span data-i18n="orText">HO·∫∂C</span></div>

                <button class="btn btn-glass full-width" id="btn-guest">
                    <span data-i18n="guestBtn">Ti·∫øp t·ª•c v·ªõi vai tr√≤ Kh√°ch</span>
                </button>

                <div class="auth-footer">
                    <span data-i18n="noAccount">Ch∆∞a c√≥ t√†i kho·∫£n?</span> 
                    <a href="#" onclick="UI.switchAuth('register')" data-i18n="registerLink">T·∫°o t√†i kho·∫£n m·ªõi</a>
                </div>
            </div>

            <div id="register-form" class="auth-form" style="display: none;">
                <h2 data-i18n="registerHeader">T·∫°o t√†i kho·∫£n</h2>
                <p class="desc-text" data-i18n="regSub">T·∫°o t√†i kho·∫£n ƒë·ªÉ l∆∞u tr·ªØ d·ªØ li·ªáu l√¢u d√†i</p>

                <div class="input-wrapper">
                    <input type="text" id="reg-username" placeholder=" " autocomplete="off">
                    <label data-i18n="usernameLabel">T√™n ƒëƒÉng nh·∫≠p</label>
                    <span class="input-icon">üë§</span>
                </div>

                <div class="input-wrapper">
                    <input type="password" id="reg-password" placeholder=" ">
                    <label data-i18n="passwordLabel">M·∫≠t kh·∫©u</label>
                    <span class="toggle-password" onclick="App.togglePassword('reg-password')">
                        <svg class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                    </span>
                </div>

                <button class="btn btn-primary full-width hover-scale shimmer-effect" id="btn-register">
                    <span data-i18n="createAccountBtn">ƒêƒÉng K√Ω Ngay</span>
                </button>

                <div class="auth-footer">
                    <span data-i18n="haveAccount">ƒê√£ c√≥ t√†i kho·∫£n?</span> 
                    <a href="#" onclick="UI.switchAuth('login')" data-i18n="loginLink">ƒêƒÉng nh·∫≠p ngay</a>
                </div>
            </div>
        </div>
        <p class="copyright">¬© 2025 VinnyCream. All rights reserved.</p>
    </div>

    <div id="app-screen" class="app-layout" style="display: none;">
        
        <aside class="sidebar">
            <div class="brand">
                <div class="logo-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
                </div>
                <span class="brand-text">Score Data</span>
            </div>
            
            <nav class="nav-menu">
                <button class="nav-item active" data-target="dashboard">
                    <span class="icon">üìä</span> <span data-i18n="navDashboard">T·ªïng quan</span>
                </button>
                <button class="nav-item" data-target="calculator">
                    <span class="icon">üßÆ</span> <span data-i18n="navCalculator">T√≠nh ƒëi·ªÉm</span>
                </button>
                <button class="nav-item" data-target="history">
                    <span class="icon">üìú</span> <span data-i18n="navHistory">L·ªãch s·ª≠</span>
                </button>
                <button class="nav-item" data-target="settings">
                    <span class="icon">‚öôÔ∏è</span> <span data-i18n="navSettings">C√†i ƒë·∫∑t</span>
                </button>
            </nav>

            <div class="sidebar-footer">
                <div class="user-mini-profile">
                    <div class="avatar-box">
                        <img src="images/DefaultProfilePic.jpg" id="mini-avatar" alt="User">
                        <span class="status-dot"></span>
                    </div>
                    <div class="user-info">
                        <div id="mini-nickname" class="name">Guest</div>
                        <div id="mini-username" class="role">@guest</div>
                    </div>
                    <button id="btn-logout-mini" class="btn-icon-sm" title="ƒêƒÉng xu·∫•t">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                    </button>
                </div>
            </div>
        </aside>

        <main class="content-area">
            
            <header class="mobile-header">
                <div class="logo-area-mobile">
                    <div class="logo-icon">SM</div>
                    <span>ScoreMaster</span>
                </div>
                <button id="mobile-menu-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
                </button>
            </header>

            <section id="dashboard" class="page-section active fade-in">
                <div class="section-header">
                    <div>
                        <h2 class="page-title" data-i18n="dashboardTitle">B·∫£ng ƒëi·ªÅu khi·ªÉn</h2>
                        <span id="dashboard-source-label" class="source-badge">üìÅ Ngu·ªìn: T·∫•t c·∫£</span>
                    </div>
                    <div class="date-display" id="current-date">...</div>
                </div>
                
                <div class="dashboard-grid">
                    <div class="main-stats glass-card glow-border">
                        <div class="stat-content full-width-flex">
                            <h3 data-i18n="totalScoreTitle">GPA T√≠ch L≈©y</h3>
                            
                            <div class="gpa-dual-display">
                                <div class="gpa-item">
                                    <span class="gpa-label">Thang 10</span>
                                    <div class="big-score counter" id="dash-gpa-10">0.00</div>
                                </div>
                                <div class="vertical-divider"></div>
                                <div class="gpa-item">
                                    <span class="gpa-label">Thang 4</span>
                                    <div class="big-score counter text-primary" id="dash-gpa-4">0.00</div>
                                </div>
                            </div>
                            
                            <div class="rank-badge" id="dash-ranking">Ch∆∞a x·∫øp lo·∫°i</div>
                        </div>
                    </div>

                    <div class="sub-stats-grid">
                        <div class="stat-card glass-card">
                            <div class="icon-box green">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                            </div>
                            <div class="info">
                                <h4 data-i18n="statPass">Qua m√¥n</h4>
                                <div class="number text-green" id="dash-pass-count">0</div>
                            </div>
                        </div>
                        <div class="stat-card glass-card">
                            <div class="icon-box red">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
                            </div>
                            <div class="info">
                                <h4 data-i18n="statFail">R·ªõt m√¥n</h4>
                                <div class="number text-red" id="dash-fail-count">0</div>
                            </div>
                        </div>
                        <div class="stat-card glass-card">
                            <div class="icon-box blue">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
                            </div>
                            <div class="info">
                                <h4 data-i18n="statCredits">T·ªïng T√≠n Ch·ªâ</h4>
                                <div class="number text-blue" id="dash-total-credits">0</div>
                            </div>
                        </div>
                    </div>

                    <div class="chart-container glass-card large-span">
                        <div class="chart-header">
                            <h4 data-i18n="chartTitle">Ph√¢n b·ªë ƒëi·ªÉm s·ªë (A - F)</h4>
                            <select id="chart-filter-year" class="chart-select">
                                <option value="all">T·∫•t c·∫£ th·ªùi gian</option>
                            </select>
                        </div>
                        <div class="chart-box">
                            <canvas id="scoreDistributionChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <section id="calculator" class="page-section fade-in">
                <h2 class="page-title" data-i18n="navCalculator">C√¥ng c·ª• t√≠nh ƒëi·ªÉm</h2>
                <div class="calc-wrapper">
                    <div class="glass-card form-container">
                        <h3 data-i18n="calcSubjectTitle">Nh·∫≠p th√¥ng tin m√¥n h·ªçc</h3>
                        
                        <div class="form-row three-cols">
                            <div class="input-wrapper flex-2">
                                <input type="text" id="subject-name" placeholder=" " autocomplete="off">
                                <label data-i18n="subjectNameLabel">T√™n m√¥n h·ªçc (V√≠ d·ª•: To√°n Cao C·∫•p)</label>
                            </div>
                            
                            <div class="input-wrapper flex-1">
                                <input type="number" id="subject-credits" placeholder=" " min="1" max="10" value="3">
                                <label data-i18n="creditsLabel">S·ªë t√≠n ch·ªâ</label>
                            </div>

                            <div class="input-wrapper flex-1">
                                <select id="weight-select">
                                    <option value="5:5">50% - 50%</option>
                                    <option value="4:6">40% - 60%</option>
                                    <option value="3:7">30% - 70%</option>
                                    <option value="2:3:5">20% - 30% - 50%</option>
                                    <option value="100">100% (ƒê·ªì √°n)</option>
                                </select>
                                <label data-i18n="weightLabel">T·ª∑ l·ªá ƒëi·ªÉm</label>
                            </div>
                        </div>

                        <div id="dynamic-inputs" class="inputs-grid">
                            </div>

                        <div class="action-buttons">
                            <button class="btn btn-primary full-width hover-scale" id="btn-calc-now">
                                <span class="icon">üñ©</span> <span data-i18n="calcBtn">T√≠nh k·∫øt qu·∫£ ngay</span>
                            </button>
                            <button class="btn btn-outline" id="btn-reset-calc" title="L√†m m·ªõi">‚Ü∫</button>
                        </div>
                    </div>

                    <div id="calc-result" class="result-card glass-card hidden">
                        <div class="result-header">
                            <span data-i18n="resultTitle">K·∫æT QU·∫¢ M√îN H·ªåC</span>
                            <button class="btn-close" onclick="UI.hideResult()">‚úï</button>
                        </div>
                        <div class="result-body">
                            <div class="score-circle-wrapper">
                                <svg class="progress-ring" width="120" height="120">
                                    <circle class="progress-ring__circle-bg" stroke="#eee" stroke-width="8" fill="transparent" r="52" cx="60" cy="60"/>
                                    <circle class="progress-ring__circle" stroke="var(--primary)" stroke-width="8" fill="transparent" r="52" cx="60" cy="60"/>
                                </svg>
                                <span id="res-score-number">0.0</span>
                            </div>
                            <div class="score-details">
                                <h3 id="res-grade-text" class="text-grade">ƒêi·ªÉm A</h3>
                                <p id="res-status-text" class="status-badge pass">QUA M√îN</p>
                            </div>
                        </div>
                        <div class="result-footer">
                            <p data-i18n="autoSaveNote" id="autosave-note">‚úÖ K·∫øt qu·∫£ ƒë√£ ƒë∆∞·ª£c t·ª± ƒë·ªông l∆∞u.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="history" class="page-section fade-in">
                <div class="glass-card full-height relative-container">
                    <div class="history-header">
                        <h2 data-i18n="historyTitle">L·ªãch s·ª≠ t√≠nh to√°n</h2>
                        <div class="search-box">
                            <span class="search-icon">üîç</span>
                            <input type="text" id="history-search" placeholder="T√¨m ki·∫øm m√¥n h·ªçc..." data-i18n-placeholder="searchPlaceholder">
                        </div>
                    </div>
                    
                    <div id="folder-container" class="folder-list-row">
                        </div>

                    <div class="controls-row">
                        <div class="filter-tabs">
                            <button class="filter-chip active" data-filter="all" data-i18n="filterAll">T·∫•t c·∫£</button>
                            <button class="filter-chip" data-filter="pass" data-i18n="filterPass">ƒê·∫≠u</button>
                            <button class="filter-chip" data-filter="fail" data-i18n="filterFail">R·ªõt</button>
                        </div>
                        
                        <div class="fancy-date-wrapper">
                            <div class="date-icon">üìÖ</div>
                            <input type="date" id="history-date-filter" class="fancy-date-input">
                            <button class="btn-clear-date" id="btn-clear-date" title="X√≥a l·ªçc ng√†y">‚úï</button>
                        </div>
                    </div>

                    <div id="selection-action-bar" class="selection-bar hidden">
                        <span class="selection-count">ƒê√£ ch·ªçn: <b id="sel-count">0</b></span>
                        <div class="selection-buttons">
                            <button class="btn btn-sm btn-primary" id="btn-create-folder">
                                üìÅ T·∫°o th∆∞ m·ª•c
                            </button>
                            <button class="btn btn-sm btn-danger" id="btn-delete-multi">
                                üóëÔ∏è X√≥a
                            </button>
                            <button class="btn btn-sm btn-outline" id="btn-cancel-sel">H·ªßy</button>
                        </div>
                    </div>

                    <div class="table-header-row">
                        <span class="col-check">
                            <input type="checkbox" id="check-all-history" class="custom-checkbox">
                        </span>
                        <span class="col-sub">M√¥n h·ªçc</span>
                        <span class="col-type">T·ª∑ l·ªá</span>
                        <span class="col-cred">T√≠n ch·ªâ</span>
                        <span class="col-score">ƒêi·ªÉm</span>
                        <span class="col-act">H√†nh ƒë·ªông</span>
                    </div>

                    <div id="history-list" class="history-list-container scroll-custom">
                        <div class="empty-state">
                            <img src="https://cdn-icons-png.flaticon.com/512/7486/7486747.png" alt="Empty" width="60">
                            <p data-i18n="emptyHistory">Ch∆∞a c√≥ d·ªØ li·ªáu n√†o</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="settings" class="page-section fade-in">
                <h2 class="page-title" data-i18n="navSettings">C√†i ƒë·∫∑t t√†i kho·∫£n</h2>
                <div class="settings-grid">
                    
                    <div class="glass-card settings-card">
                        <h3 data-i18n="personalInfo">Th√¥ng tin c√° nh√¢n</h3>
                        <div class="profile-edit-area">
                            <div class="avatar-upload-wrapper">
                                <img src="images/DefaultProfilePic.jpg" id="settings-avatar" alt="Avatar">
                                <label for="avatar-input" class="edit-btn" title="ƒê·ªïi ·∫£nh">‚úé</label>
                                <input type="file" id="avatar-input" accept="image/png, image/jpeg, image/gif, image/webp" hidden>
                            </div>
                            <div class="profile-inputs">
                                <div class="input-wrapper tight">
                                    <input type="text" id="set-username" readonly>
                                    <label data-i18n="accountName">T√™n ƒëƒÉng nh·∫≠p</label>
                                    <button class="btn-text-action" id="btn-change-username" data-i18n="changeBtn">Thay ƒë·ªïi</button>
                                </div>
                                <small class="hint-text" id="cooldown-msg">ƒê·ªïi l·∫°i sau: <span id="cooldown-timer">00:00</span></small>
                                
                                <div class="input-wrapper tight mt-2">
                                    <input type="text" id="set-nickname">
                                    <label data-i18n="nickname">Bi·ªát danh (Hi·ªÉn th·ªã)</label>
                                    <button class="btn-text-action" id="btn-save-nick" data-i18n="saveBtn">L∆∞u</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card settings-card">
                        <h3 data-i18n="appSettings">T√πy ch·ªânh ·ª©ng d·ª•ng</h3>
                        
                        <div class="setting-row">
                            <div class="label-box">
                                <div class="icon-setting">üåô</div>
                                <div>
                                    <span class="setting-title" data-i18n="darkMode">Ch·∫ø ƒë·ªô T·ªëi (Dark Mode)</span>
                                    <p class="desc">Giao di·ªán t·ªëi gi√∫p b·∫£o v·ªá m·∫Øt ban ƒë√™m</p>
                                </div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="toggle-theme">
                                <span class="slider round"></span>
                            </label>
                        </div>

                        <div class="setting-row">
                            <div class="label-box">
                                <div class="icon-setting">üíæ</div>
                                <div>
                                    <span class="setting-title" data-i18n="autoSave">T·ª± ƒë·ªông l∆∞u ƒëi·ªÉm</span>
                                    <p class="desc">L∆∞u k·∫øt qu·∫£ ngay khi b·∫•m t√≠nh</p>
                                </div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="toggle-autosave">
                                <span class="slider round"></span>
                            </label>
                        </div>

                        <div class="setting-row">
                            <div class="label-box">
                                <div class="icon-setting">üåê</div>
                                <div>
                                    <span class="setting-title" data-i18n="language">Ng√¥n ng·ªØ / Language</span>
                                </div>
                            </div>
                            <div class="lang-selector">
                                <button class="lang-btn active" data-lang="vi">üáªüá≥ VI</button>
                                <button class="lang-btn" data-lang="en">üá∫üá∏ EN</button>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card settings-card">
                        <h3 data-i18n="changePass">B·∫£o m·∫≠t</h3>
                        <div class="input-wrapper">
                            <input type="password" id="old-pass" placeholder=" ">
                            <label data-i18n="oldPass">M·∫≠t kh·∫©u hi·ªán t·∫°i</label>
                        </div>
                        <div class="input-wrapper">
                            <input type="password" id="new-pass" placeholder=" ">
                            <label data-i18n="newPass">M·∫≠t kh·∫©u m·ªõi</label>
                        </div>
                        <button class="btn btn-primary btn-sm" id="btn-change-pass" data-i18n="saveChangeBtn">C·∫≠p nh·∫≠t m·∫≠t kh·∫©u</button>
                    </div>

                    <div class="glass-card danger-zone">
                        <h3 data-i18n="accountMgmt">V√πng nguy hi·ªÉm</h3>
                        <p class="warning-text">C√°c h√†nh ƒë·ªông d∆∞·ªõi ƒë√¢y kh√¥ng th·ªÉ ho√†n t√°c.</p>
                        <div class="danger-actions">
                            <button class="btn btn-outline" onclick="Auth.logout()" data-i18n="logoutBtn">ƒêƒÉng xu·∫•t</button>
                            <button class="btn btn-danger" onclick="Auth.deleteAccount()" data-i18n="deleteAccBtn">X√≥a vƒ©nh vi·ªÖn t√†i kho·∫£n</button>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>

    <div id="crop-modal" class="modal-overlay hidden">
        <div class="glass-card modal-content">
            <h3>Ch·ªânh s·ª≠a ·∫£nh ƒë·∫°i di·ªán</h3>
            <div class="crop-container">
                <img id="crop-image" src="" alt="Image to crop">
            </div>
            <div class="modal-actions">
                <button class="btn btn-outline" onclick="App.closeCropModal()">H·ªßy</button>
                <button class="btn btn-primary" onclick="App.saveCrop()">L∆∞u Thay ƒê·ªïi</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>