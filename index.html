<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Score Data - H·ªá Th·ªëng T√≠nh ƒêi·ªÉm ƒê·∫°i H·ªçc</title>
    <meta name="description" content="C√¥ng c·ª• t√≠nh ƒëi·ªÉm GPA, qu·∫£n l√Ω ƒëi·ªÉm s·ªë sinh vi√™n ƒë·∫°i h·ªçc t·ªët nh·∫•t.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
    
    <link rel="stylesheet" href="style.css">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body data-theme="light">

    <div class="bg-animation">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
        <div class="grid-overlay"></div>
    </div>

    <div id="toast-container"></div>

    <input type="file" id="import-file-input" accept=".json" style="display: none;">

    <div id="auth-screen" class="main-container center-content">
        <div class="glass-card auth-card fade-in-up">
            <div class="auth-header">
                <div class="logo-area">
                    <div class="logo-icon-lg">
                        <i class="fa-solid fa-graduation-cap"></i>
                    </div>
                    <h1 class="app-name">Score Data</h1>
                    <p class="app-slogan" data-i18n="welcomeSub">H·ªá th·ªëng qu·∫£n l√Ω ƒëi·ªÉm s·ªë sinh vi√™n</p>
                </div>
            </div>
            
            <div id="login-form" class="auth-form">
                <h2 data-i18n="loginHeader">ƒêƒÉng nh·∫≠p</h2>
                
                <div class="input-wrapper">
                    <input type="text" id="login-username" placeholder=" " autocomplete="username">
                    <label data-i18n="usernameLabel">T√™n ƒëƒÉng nh·∫≠p</label>
                    <span class="input-icon"><i class="fa-regular fa-user"></i></span>
                </div>

                <div class="input-wrapper">
                    <input type="password" id="login-password" placeholder=" " autocomplete="current-password">
                    <label data-i18n="passwordLabel">M·∫≠t kh·∫©u</label>
                    <span class="toggle-password" onclick="App.togglePassword('login-password')">
                        <i class="fa-regular fa-eye"></i>
                    </span>
                </div>

                <button class="btn btn-primary full-width hover-scale shimmer-effect" id="btn-login">
                    <span data-i18n="loginBtn">ƒêƒÉng nh·∫≠p</span>
                    <i class="fa-solid fa-arrow-right-to-bracket"></i>
                </button>

                <div class="divider"><span data-i18n="orText">HO·∫∂C</span></div>

                <button class="btn btn-glass full-width" id="btn-guest">
                    <span data-i18n="guestBtn">Ti·∫øp t·ª•c v·ªõi vai tr√≤ Kh√°ch</span>
                </button>

                <div class="auth-footer">
                    <span data-i18n="noAccount">Ch∆∞a c√≥ t√†i kho·∫£n?</span> 
                    <a href="#" onclick="UI.switchAuth('register')" data-i18n="registerLink">T·∫°o t√†i kho·∫£n m·ªõi</a>
                </div>
            </div>

            <div id="register-form" class="auth-form" style="display: none;">
                <h2 data-i18n="registerHeader">T·∫°o t√†i kho·∫£n</h2>
                <p class="desc-text" data-i18n="regSub">T·∫°o t√†i kho·∫£n ƒë·ªÉ l∆∞u tr·ªØ d·ªØ li·ªáu l√¢u d√†i</p>

                <div class="input-wrapper">
                    <input type="text" id="reg-username" placeholder=" " autocomplete="off">
                    <label data-i18n="usernameLabel">T√™n ƒëƒÉng nh·∫≠p</label>
                    <span class="input-icon"><i class="fa-regular fa-user"></i></span>
                </div>

                <div class="input-wrapper">
                    <input type="password" id="reg-password" placeholder=" ">
                    <label data-i18n="passwordLabel">M·∫≠t kh·∫©u</label>
                    <span class="toggle-password" onclick="App.togglePassword('reg-password')">
                        <i class="fa-regular fa-eye"></i>
                    </span>
                </div>

                <button class="btn btn-primary full-width hover-scale shimmer-effect" id="btn-register">
                    <span data-i18n="createAccountBtn">ƒêƒÉng K√Ω Ngay</span>
                </button>

                <div class="auth-footer">
                    <span data-i18n="haveAccount">ƒê√£ c√≥ t√†i kho·∫£n?</span> 
                    <a href="#" onclick="UI.switchAuth('login')" data-i18n="loginLink">ƒêƒÉng nh·∫≠p ngay</a>
                </div>
            </div>
        </div>
        <p class="copyright"></p>
    </div>

    <div id="app-screen" class="app-layout" style="display: none;">
        
        <aside class="sidebar">
            <div class="brand">
                <div class="logo-icon">
                    <i class="fa-solid fa-graduation-cap"></i>
                </div>
                <span class="brand-text">Score Data</span>
            </div>
            
            <nav class="nav-menu">
                <button class="nav-item active" data-target="dashboard">
                    <span class="icon"><i class="fa-solid fa-chart-pie"></i></span> 
                    <span data-i18n="navDashboard">T·ªïng quan</span>
                </button>
                <button class="nav-item" data-target="calculator">
                    <span class="icon"><i class="fa-solid fa-calculator"></i></span> 
                    <span data-i18n="navCalculator">T√≠nh ƒëi·ªÉm</span>
                </button>
                <button class="nav-item" data-target="history">
                    <span class="icon"><i class="fa-solid fa-clock-rotate-left"></i></span> 
                    <span data-i18n="navHistory">L·ªãch s·ª≠</span>
                </button>
                
                <button class="nav-item hidden-important" id="nav-admin-panel" data-target="admin-panel" style="color: var(--secondary);">
                    <span class="icon"><i class="fa-solid fa-screwdriver-wrench"></i></span> 
                    <span>Admin Panel</span>
                </button>

                <button class="nav-item" data-target="donate" style="color: var(--success);">
                    <span class="icon"><i class="fa-solid fa-circle-dollar-to-slot"></i></span>
                    <span data-i18n="navDonate">Donate (·ª¶ng h·ªô)</span>
                </button>

                <button class="nav-item" data-target="settings">
                    <span class="icon"><i class="fa-solid fa-gear"></i></span> 
                    <span data-i18n="navSettings">C√†i ƒë·∫∑t</span>
                </button>
            </nav>

            <div class="sidebar-footer">
                <div class="user-mini-profile">
                    <div class="avatar-box" id="mini-avatar-box">
                        <img src="images/DefaultProfilePic.jpg" id="mini-avatar-img" alt="User" class="avatar-img-el">
                        <i class="fa-solid fa-circle-user avatar-icon-el" id="mini-avatar-icon"></i>
                        <span class="status-dot"></span>
                    </div>
                    <div class="user-info">
                        <div id="mini-nickname" class="name">Guest</div>
                        <div id="mini-username" class="role">@guest</div>
                    </div>
                    <button id="btn-logout-mini" class="btn-icon-sm" title="ƒêƒÉng xu·∫•t">
                        <i class="fa-solid fa-right-from-bracket"></i>
                    </button>
                </div>
            </div>
        </aside>

        <div class="sidebar-overlay" onclick="document.querySelector('.sidebar').classList.remove('open')"></div>

        <main class="content-area">
            
            <header class="mobile-header">
                <div class="logo-area-mobile">
                    <div class="logo-icon-sm"><i class="fa-solid fa-graduation-cap"></i></div>
                    <span>Score Data</span>
                </div>
                <button id="mobile-menu-btn">
                    <i class="fa-solid fa-bars"></i>
                </button>
            </header>

            <section id="dashboard" class="page-section active fade-in">
                <div class="section-header">
                    <div>
                        <h2 class="page-title" data-i18n="dashboardTitle">B·∫£ng ƒëi·ªÅu khi·ªÉn</h2>
                        <span id="dashboard-source-label" class="source-badge">üìÅ Ngu·ªìn: T·∫•t c·∫£</span>
                    </div>
                    <div class="date-display" id="current-date">...</div>
                </div>
                
                <div class="dashboard-grid">
                    <div class="main-stats glass-card glow-border">
                        <div class="stat-content full-width-flex">
                            <h3 data-i18n="totalScoreTitle">GPA T√≠ch L≈©y</h3>
                            
                            <div class="gpa-dual-display">
                                <div class="gpa-item">
                                    <span class="gpa-label">Thang 10</span>
                                    <div class="big-score counter" id="dash-gpa-10">0.00</div>
                                </div>
                                <div class="vertical-divider"></div>
                                <div class="gpa-item">
                                    <span class="gpa-label">Thang 4</span>
                                    <div class="big-score counter text-primary" id="dash-gpa-4">0.00</div>
                                </div>
                            </div>
                            
                            <div class="rank-badge" id="dash-ranking">Ch∆∞a x·∫øp lo·∫°i</div>
                        </div>
                    </div>

                    <div class="sub-stats-grid">
                        <div class="stat-card glass-card">
                            <div class="icon-box green">
                                <i class="fa-regular fa-circle-check"></i>
                            </div>
                            <div class="info">
                                <h4 data-i18n="statPass">Qua m√¥n</h4>
                                <div class="number text-green" id="dash-pass-count">0</div>
                            </div>
                        </div>
                        <div class="stat-card glass-card">
                            <div class="icon-box red">
                                <i class="fa-regular fa-circle-xmark"></i>
                            </div>
                            <div class="info">
                                <h4 data-i18n="statFail">R·ªõt m√¥n</h4>
                                <div class="number text-red" id="dash-fail-count">0</div>
                            </div>
                        </div>
                        <div class="stat-card glass-card">
                            <div class="icon-box blue">
                                <i class="fa-solid fa-layer-group"></i>
                            </div>
                            <div class="info">
                                <h4 data-i18n="statCredits">T√≠n Ch·ªâ</h4>
                                <div class="number text-blue" id="dash-total-credits">0</div>
                            </div>
                        </div>
                    </div>

                    <div class="chart-container glass-card large-span">
                        <div class="chart-header">
                            <h4 data-i18n="chartHeaderGeneral">Th·ªëng k√™ & Xu h∆∞·ªõng</h4>
                            <select id="chart-filter-year" class="chart-select">
                                <option value="all">T·∫•t c·∫£ th·ªùi gian</option>
                            </select>
                        </div>

                        <div class="dual-chart-layout">
                            <div class="chart-col left-chart">
                                <h5 class="chart-subtitle" data-i18n="chartTrendTitle">Xu h∆∞·ªõng GPA (Theo k·ª≥)</h5>
                                <div class="chart-box">
                                    <canvas id="gpaTrendChart"></canvas>
                                </div>
                            </div>

                            <div class="chart-divider"></div>

                            <div class="chart-col right-chart">
                                <h5 class="chart-subtitle" data-i18n="chartDistTitle">Ph√¢n b·ªë ƒëi·ªÉm (A - F)</h5>
                                <div class="chart-box">
                                    <canvas id="scoreDistributionChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="calculator" class="page-section fade-in">
                <h2 class="page-title" data-i18n="navCalculator">C√¥ng c·ª• t√≠nh ƒëi·ªÉm</h2>
                <div class="calc-wrapper">
                    <div class="glass-card form-container">
                        <h3 data-i18n="calcSubjectTitle">Nh·∫≠p th√¥ng tin m√¥n h·ªçc</h3>
                        
                        <div class="form-row three-cols">
                            <div class="input-wrapper flex-2">
                                <input type="text" id="subject-name" placeholder=" " autocomplete="off">
                                <label data-i18n="subjectNameLabel">T√™n m√¥n h·ªçc (V√≠ d·ª•: To√°n Cao C·∫•p)</label>
                            </div>
                            
                            <div class="input-wrapper flex-1">
                                <input type="number" id="subject-credits" placeholder=" " min="1" max="10" value="3" oninput="if(this.value>10)this.value=10;if(this.value<0)this.value=0;">
                                <label data-i18n="creditsLabel">S·ªë t√≠n ch·ªâ</label>
                            </div>

                            <div class="input-wrapper flex-1">
                                <select id="weight-select">
                                    <option value="5:5">50% - 50%</option>
                                    <option value="4:6">40% - 60%</option>
                                    <option value="3:7">30% - 70%</option>
                                    <option value="2:3:5">20% - 30% - 50%</option>
                                    <option value="100">100% (ƒê·ªì √°n)</option>
                                </select>
                                <label data-i18n="weightLabel">T·ª∑ l·ªá ƒëi·ªÉm</label>
                            </div>
                        </div>

                        <div id="dynamic-inputs" class="inputs-grid">
                            </div>

                        <div class="action-buttons">
                            <button class="btn btn-primary full-width hover-scale" id="btn-calc-now">
                                <span class="icon"><i class="fa-solid fa-calculator"></i></span> <span data-i18n="calcBtn">T√≠nh k·∫øt qu·∫£ ngay</span>
                            </button>
                            <button class="btn btn-outline" id="btn-reset-calc" title="L√†m m·ªõi">
                                <i class="fa-solid fa-rotate-right"></i>
                            </button>
                        </div>
                    </div>

                    <div id="calc-result" class="result-wrapper hidden">
                        <div class="result-overlay-bg" onclick="UI.hideResult()"></div> 
                        <div class="result-modal-inner glass-card">
                            <button class="btn-close-floating" onclick="UI.hideResult()"><i class="fa-solid fa-xmark"></i></button>
                            
                            <div class="result-header">
                                <span data-i18n="resultTitle">K·∫æT QU·∫¢ M√îN H·ªåC</span>
                            </div>
                            
                            <div class="result-body">
                                <div class="score-circle-wrapper">
                                    <svg class="progress-ring" width="120" height="120">
                                        <circle class="progress-ring__circle-bg" stroke="#eee" stroke-width="8" fill="transparent" r="52" cx="60" cy="60"/>
                                        <circle class="progress-ring__circle" stroke="var(--primary)" stroke-width="8" fill="transparent" r="52" cx="60" cy="60"/>
                                    </svg>
                                    <span id="res-score-number">0.0</span>
                                </div>
                                
                                <div class="score-details">
                                    <h3 id="res-grade-text" class="text-grade">ƒêi·ªÉm A</h3>
                                    <div class="score-breakdown">
                                        <div class="score-item">
                                            <span class="label">Thang 10</span>
                                            <span class="value" id="res-score-10">0.0</span>
                                        </div>
                                        <div class="vertical-sep"></div>
                                        <div class="score-item">
                                            <span class="label">Thang 4</span>
                                            <span class="value" id="res-score-4">0.0</span>
                                        </div>
                                    </div>
                                    <p id="res-status-text" class="status-badge pass">QUA M√îN</p>
                                </div>
                            </div>
                            
                            <div class="result-footer">
                                <p data-i18n="autoSaveNote" id="autosave-note"><i class="fa-solid fa-check"></i> K·∫øt qu·∫£ ƒë√£ ƒë∆∞·ª£c t·ª± ƒë·ªông l∆∞u.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="history" class="page-section fade-in">
                <div class="glass-card full-height relative-container">
                    <div class="history-header">
                        <h2 data-i18n="historyTitle">L·ªãch s·ª≠ t√≠nh to√°n</h2>
                        <div class="search-box">
                            <span class="search-icon"><i class="fa-solid fa-magnifying-glass"></i></span>
                            <input type="text" id="history-search" placeholder="T√¨m ki·∫øm m√¥n h·ªçc..." data-i18n-placeholder="searchPlaceholder">
                        </div>
                    </div>
                    
                    <div id="folder-container" class="folder-list-row"></div>

                    <div class="controls-row">
                        <div class="filter-tabs">
                            <button class="filter-chip active" data-filter="all" data-i18n="filterAll">T·∫•t c·∫£</button>
                            <button class="filter-chip" data-filter="pass" data-i18n="filterPass">ƒê·∫≠u</button>
                            <button class="filter-chip" data-filter="fail" data-i18n="filterFail">R·ªõt</button>
                        </div>
                        
                        <div class="fancy-date-wrapper">
                            <div class="date-icon"><i class="fa-regular fa-calendar"></i></div>
                            <input type="date" id="history-date-filter" class="fancy-date-input">
                            <button class="btn-clear-date" id="btn-clear-date" title="X√≥a l·ªçc ng√†y"><i class="fa-solid fa-xmark"></i></button>
                        </div>
                    </div>

                    <div id="selection-action-bar" class="selection-bar hidden">
                        <span class="selection-count">ƒê√£ ch·ªçn: <b id="sel-count">0</b></span>
                        <div class="selection-buttons">
                            <button class="btn btn-sm btn-action-high-contrast" id="btn-create-folder"><i class="fa-regular fa-folder"></i> T·∫°o Folder</button>
                            <button class="btn btn-sm btn-action-high-contrast" id="btn-export-multi-folder" title="Export Selected"><i class="fa-solid fa-share-from-square"></i> Export</button>
                            <button class="btn btn-sm btn-danger-high-contrast" id="btn-delete-multi"><i class="fa-solid fa-trash"></i> X√≥a</button>
                            <button class="btn btn-sm btn-outline-high-contrast" id="btn-cancel-sel">H·ªßy</button>
                        </div>
                    </div>

                    <div class="table-header-row">
                        <div class="col-check">
                            <input type="checkbox" id="check-all-history" class="custom-checkbox">
                        </div>
                        <div class="col-sub">M√¥n h·ªçc</div>
                        <div class="col-type">T·ª∑ l·ªá</div>
                        <div class="col-cred center-text">T√≠n ch·ªâ</div>
                        <div class="col-score center-text">ƒêi·ªÉm s·ªë</div>
                        <div class="col-grade center-text">ƒêi·ªÉm ch·ªØ</div>
                        <div class="col-act">X√≥a</div>
                    </div>

                    <div id="history-list" class="history-list-container scroll-custom">
                        <div class="empty-state">
                            <img src="https://cdn-icons-png.flaticon.com/512/7486/7486747.png" alt="Empty" width="60">
                            <p data-i18n="emptyHistory">Ch∆∞a c√≥ d·ªØ li·ªáu n√†o</p>
                        </div>
                    </div>

                    <div id="history-pagination" class="pagination-controls hidden">
                        </div>
                </div>
            </section>
            
            <section id="admin-panel" class="page-section fade-in">
                <div class="section-header">
                    <div>
                        <h2 class="page-title text-admin">Admin Panel</h2>
                        <span class="source-badge" style="background: var(--secondary); color: white;">QU·∫¢N TR·ªä VI√äN</span>
                    </div>
                    <button class="btn btn-primary" onclick="AdminPanel.openCreateModal()">
                        <i class="fa-solid fa-user-plus"></i> T·∫°o t√†i kho·∫£n m·ªõi
                    </button>
                </div>

                <div class="glass-card full-height">
                    <div class="history-header">
                        <h3>Danh s√°ch t√†i kho·∫£n h·ªá th·ªëng</h3>
                        
                        <div class="search-box">
                            <span class="search-icon"><i class="fa-solid fa-magnifying-glass"></i></span>
                            <input type="text" id="admin-search-user" placeholder="T√¨m ki·∫øm Username/ID..." onkeyup="AdminPanel.searchUsers(this.value)">
                        </div>

                        <button class="btn btn-sm btn-outline" onclick="AdminPanel.loadUsers()">
                            <i class="fa-solid fa-rotate"></i> L√†m m·ªõi
                        </button>
                    </div>

                    <div class="table-header-row admin-table-header">
                        <div style="flex: 1">Ng∆∞·ªùi d√πng</div>
                        <div style="width: 150px">Password</div>
                        <div style="width: 120px" class="center-text">Tr·∫°ng th√°i</div>
                        <div style="width: 100px" class="center-text">H√†nh ƒë·ªông</div>
                    </div>

                    <div id="admin-user-list" class="history-list-container scroll-custom">
                        <div class="empty-state">Loading users...</div>
                    </div>

                    <div id="admin-pagination" class="pagination-controls hidden">
                        </div>
                </div>
            </section>

            <section id="donate" class="page-section fade-in">
                <h2 class="page-title" data-i18n="navDonate">·ª¶ng h·ªô (Donate)</h2>
                
                <div class="glass-card donate-container">
                    <div class="donate-left-col">
                        <div class="qr-frame">
                            <img src="Images/agribank_qr.png" id="donate-qr-img" alt="M√£ QR" class="qr-image">
                        </div>
                        
                        <div class="donate-switcher">
                            <button class="btn-switch active" id="btn-switch-agri">
                                <img src="Images/agribank_logo.png" alt="Agribank" class="btn-logo-icon">
                                <span>Agribank</span>
                            </button>
                            <button class="btn-switch" id="btn-switch-momo">
                                <img src="Images/momo_logo.png" alt="Momo" class="btn-logo-icon">
                                <span>Momo</span>
                            </button>
                        </div>
                    </div>

                    <div class="donate-right-col">
                        <div class="bank-header-display">
                            <img src="Images/agribank_logo.png" id="donate-provider-logo" alt="Logo" class="provider-logo-lg">
                            <h3 id="donate-provider-name" class="provider-name-lg">Agribank</h3>
                        </div>

                        <div class="account-details-box">
                            <div class="detail-row">
                                <label>Ch·ªß t√†i kho·∫£n</label>
                                <div class="info-text highlight-text">NGUYEN HOANG VINH</div>
                            </div>
                            <div class="detail-row">
                                <label>S·ªë t√†i kho·∫£n / S·ªë v√≠</label>
                                <div class="info-text highlight-number" id="donate-account-num">8888917110015</div>
                            </div>
                        </div>

                        <div class="donate-note-box">
                            <i class="fa-solid fa-quote-left quote-icon"></i>
                            <p class="note-text">
                                N·∫øu b·∫°n c√≥ nhu c·∫ßu ·ªßng h·ªô Project website c√° nh√¢n n√†y ƒë·ªÉ m√¨nh c√≥ ƒë·ªông l·ª±c c·∫£i ti·∫øn nhi·ªÅu t√≠nh nƒÉng v√† ch·ª©c nƒÉng h∆°n th√¨ m√¨nh s·∫Ω r·∫•t vui bi·∫øt bao, C·∫£m ∆°n b·∫°n ƒë√£ s·ª≠ d·ª•ng project.
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="settings" class="page-section fade-in">
                <h2 class="page-title" data-i18n="navSettings">C√†i ƒë·∫∑t t√†i kho·∫£n</h2>
                <div class="settings-grid">
                    
                    <div class="glass-card settings-card">
                        <h3 data-i18n="personalInfo">Th√¥ng tin c√° nh√¢n</h3>
                        <div class="profile-edit-area">
                            <div class="avatar-upload-wrapper" id="settings-avatar-wrapper">
                                <img src="images/DefaultProfilePic.jpg" id="settings-avatar" alt="Avatar" class="avatar-img-el">
                                <i class="fa-solid fa-circle-user avatar-icon-el" id="settings-avatar-icon"></i>
                                
                                <label for="avatar-input" class="edit-btn" id="btn-edit-avatar" title="ƒê·ªïi ·∫£nh"><i class="fa-solid fa-pen"></i></label>
                                <input type="file" id="avatar-input" accept="image/png, image/jpeg, image/gif, image/webp" hidden>
                            </div>
                            <div class="profile-inputs">
                                <div class="input-wrapper tight">
                                    <input type="text" id="set-username" readonly>
                                    <label data-i18n="accountName">T√™n ƒëƒÉng nh·∫≠p</label>
                                    <button class="btn-text-action" id="btn-change-username" data-i18n="changeBtn">Thay ƒë·ªïi</button>
                                </div>
                                <small class="hint-text" id="cooldown-msg">ƒê·ªïi l·∫°i sau: <span id="cooldown-timer">00:00</span></small>
                                
                                <div class="input-wrapper tight mt-2">
                                    <input type="text" id="set-nickname">
                                    <label data-i18n="nickname">Bi·ªát danh (Hi·ªÉn th·ªã)</label>
                                    <button class="btn-text-action" id="btn-save-nick" data-i18n="saveBtn">L∆∞u</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card settings-card">
                        <h3 data-i18n="appSettings">T√πy ch·ªânh ·ª©ng d·ª•ng</h3>
                        
                        <div class="setting-row">
                            <div class="label-box">
                                <div class="icon-setting"><i class="fa-solid fa-moon"></i></div>
                                <div>
                                    <span class="setting-title" data-i18n="darkMode">Ch·∫ø ƒë·ªô T·ªëi (Dark Mode)</span>
                                    <p class="desc">Giao di·ªán t·ªëi gi√∫p b·∫£o v·ªá m·∫Øt ban ƒë√™m</p>
                                </div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="toggle-theme">
                                <span class="slider round"></span>
                            </label>
                        </div>

                        <div class="setting-row" id="setting-row-autosave">
                            <div class="label-box">
                                <div class="icon-setting"><i class="fa-solid fa-floppy-disk"></i></div>
                                <div>
                                    <span class="setting-title" data-i18n="autoSave">T·ª± ƒë·ªông l∆∞u ƒëi·ªÉm</span>
                                    <p class="desc">L∆∞u k·∫øt qu·∫£ ngay khi b·∫•m t√≠nh</p>
                                </div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="toggle-autosave">
                                <span class="slider round"></span>
                            </label>
                        </div>

                        <div class="setting-row stacked">
                            <div class="label-box">
                                <div class="icon-setting"><i class="fa-solid fa-building-columns"></i></div>
                                <div>
                                    <span class="setting-title" data-i18n="gradingScaleTitle">Quy ch·∫ø quy ƒë·ªïi ƒëi·ªÉm (Tr∆∞·ªùng)</span>
                                    <p class="desc" data-i18n="gradingScaleDesc">Ch·ªçn tr∆∞·ªùng c·ªßa b·∫°n ƒë·ªÉ t√≠nh ƒëi·ªÉm GPA v√† x·∫øp lo·∫°i ch√≠nh x√°c.</p>
                                </div>
                            </div>
                            <select id="grading-scale-select" class="setting-select-box">
                                <option value="HUFLIT">Tr∆∞·ªùng ƒê·∫°i h·ªçc Ngo·∫°i ng·ªØ - Tin H·ªçc (HUFLIT)</option>
                                <option value="HUIT">Tr∆∞·ªùng ƒê·∫°i h·ªçc C√¥ng th∆∞∆°ng (HUIT)</option>
                            </select>
                        </div>

                        <div class="setting-row">
                            <div class="label-box">
                                <div class="icon-setting"><i class="fa-solid fa-globe"></i></div>
                                <div>
                                    <span class="setting-title" data-i18n="language">Ng√¥n ng·ªØ / Language</span>
                                </div>
                            </div>
                            <div class="lang-selector">
                                <button class="lang-btn active" data-lang="vi">üáªüá≥ VN</button>
                                <button class="lang-btn" data-lang="en">üá∫üá∏ EN</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="glass-card settings-card">
                        <h3 data-i18n="backupTitle">Sao l∆∞u d·ªØ li·ªáu</h3>
                        <p class="desc-text" style="margin-bottom: 15px;" data-i18n="backupDesc">Xu·∫•t d·ªØ li·ªáu ƒë·ªÉ chuy·ªÉn sang thi·∫øt b·ªã m·ªõi ho·∫∑c nh·∫≠p d·ªØ li·ªáu ƒë√£ l∆∞u.</p>
                        
                        <div class="backup-actions" style="display: flex; gap: 15px;">
                            <button class="btn btn-outline full-width" id="btn-export-data">
                                <i class="fa-solid fa-file-export"></i> <span data-i18n="btnExport">Xu·∫•t (Export)</span>
                            </button>
                            <button class="btn btn-outline full-width" id="btn-import-data">
                                <i class="fa-solid fa-file-import"></i> <span data-i18n="btnImport">Nh·∫≠p (Import)</span>
                            </button>
                        </div>
                    </div>

                    <div class="glass-card settings-card">
                        <h3 data-i18n="changePass">B·∫£o m·∫≠t</h3>
                        <div class="input-wrapper">
                            <input type="password" id="old-pass" placeholder=" ">
                            <label data-i18n="oldPass">M·∫≠t kh·∫©u hi·ªán t·∫°i</label>
                        </div>
                        <div class="input-wrapper">
                            <input type="password" id="new-pass" placeholder=" ">
                            <label data-i18n="newPass">M·∫≠t kh·∫©u m·ªõi</label>
                        </div>
                        <button class="btn btn-primary btn-sm" id="btn-change-pass" data-i18n="saveChangeBtn">C·∫≠p nh·∫≠t m·∫≠t kh·∫©u</button>
                    </div>

                    <div class="glass-card danger-zone">
                        <h3 data-i18n="accountMgmt">V√πng nguy hi·ªÉm</h3>
                        <p class="warning-text">C√°c h√†nh ƒë·ªông d∆∞·ªõi ƒë√¢y kh√¥ng th·ªÉ ho√†n t√°c.</p>
                        <div class="danger-actions">
                            <button class="btn btn-outline" onclick="Auth.logout()" data-i18n="logoutBtn">ƒêƒÉng xu·∫•t</button>
                            <button class="btn btn-danger" onclick="Auth.deleteAccount()" data-i18n="deleteAccBtn">X√≥a vƒ©nh vi·ªÖn t√†i kho·∫£n</button>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <div id="crop-modal" class="modal-overlay hidden">
        <div class="glass-card modal-content">
            <h3>Ch·ªânh s·ª≠a ·∫£nh ƒë·∫°i di·ªán</h3>
            <div class="crop-container">
                <img id="crop-image" src="" alt="Image to crop">
            </div>
            <div class="modal-actions">
                <button class="btn btn-outline" onclick="App.closeCropModal()">H·ªßy</button>
                <button class="btn btn-primary" onclick="App.saveCrop()">L∆∞u Thay ƒê·ªïi</button>
            </div>
        </div>
    </div>

    <div id="admin-create-modal" class="modal-overlay hidden">
        <div class="glass-card modal-content">
            <h3>T·∫°o t√†i kho·∫£n m·ªõi (Admin)</h3>
            <div class="input-wrapper">
                <input type="text" id="admin-new-username" placeholder=" ">
                <label>Username</label>
            </div>
            <div class="input-wrapper">
                <input type="text" id="admin-new-password" placeholder=" ">
                <label>Password</label>
            </div>
            <div class="modal-actions">
                <button class="btn btn-outline" onclick="document.getElementById('admin-create-modal').classList.add('hidden')">H·ªßy</button>
                <button class="btn btn-primary" onclick="AdminPanel.createUser()">T·∫°o ngay</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="script.js"></script>
</body>
</html>